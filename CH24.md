# **Capítulo 24 – Network Assurance**

Network Assurance es el conjunto de herramientas, protocolos y prácticas que permiten:

1. **Visibilidad completa del estado de la red**
    
2. **Detección de fallos antes de afectar servicios**
    
3. **Validación de políticas e “intento” de la red (intent)**
    
4. **Automatización de diagnósticos y correcciones**
    
5. **Uso de telemetría continua en lugar de SNMP tradicional**
    

Es un pilar fundamental en las arquitecturas Cisco modernas: **SD-WAN**, **SD-Access**, **Cisco DNA Center**, **Meraki Dashboard**, y ambientes programables con **NETCONF/RESTCONF/YANG**.

---

# 1. Evolución del monitoreo: de SNMP a Telemetría

## **SNMP (modelo tradicional pull-based)**

- El NMS consulta periódicamente a los dispositivos
    
- Escalabilidad limitada
    
- Latencia alta
    
- Muestras incompletas
    

## **Streaming Telemetry (modelo push-based)**

- Los dispositivos **envían datos continuamente**
    
- Usa protocolos modernos (gRPC, NETCONF/YANG, dial-out/dial-in)
    
- Gran volumen de métricas con baja latencia
    
- Arquitectura orientada al _real-time analytics_
    

Es el modelo usado por:

- Cisco DNA Center
    
- Cisco SD-WAN (vManage)
    
- Cisco ThousandEyes
    
- Cisco Meraki
    

---

# 2. Network Assurance en Cisco DNA Center

Cisco DNA Center implementa assurance basado en:

### **2.1 Intent-Based Networking (IBN)**

Define “lo que se espera que la red haga” y verifica que el estado real coincida.

### **2.2 Telemetría continua**

Recolecta millones de métricas:

- Latencia
    
- RSSI/SNR de clientes Wi-Fi
    
- CPU/Memoria de dispositivos
    
- Flujos de aplicaciones
    
- Cambios de rutas
    
- Eventos de seguridad
    

### **2.3 Analytics + Machine Learning**

Detecta patrones anómalos:

- Roaming problemático
    
- AP ruidoso
    
- Retraso excesivo en WAN
    
- Congestión crónica
    
- Fallas DHCP, DNS, CAPWAP
    
- Problemas en switches PoE
    

### **2.4 Heurísticas de experiencia del cliente (Client Experience Score)**

Analiza:

- Onboarding
    
- DHCP
    
- Autenticación
    
- Throughput
    
- Roaming
    

DNA Center puede identificar exactamente en qué etapa falló el cliente.

---

# 3. Assurance en Cisco SD-WAN

SD-WAN aporta assurance en el dominio WAN:

### Métricas que revisa:

- Latencia, jitter y pérdida por enlace
    
- SLA real vs SLA esperado
    
- Calidad de túneles IPsec
    
- Performance por aplicación
    
- Path elegido por políticas
    
- Estado del fabric (vSmart, vEdge, vBond, vManage)
    

### Capacidades clave:

- Monitorización end-to-end
    
- Informes de aplicaciones (App Aware Routing)
    
- Visibilidad de desempeño por sitio o región
    
- Troubleshooting remoto automatizado
    

---

# 4. Protocolos y tecnologías para Network Assurance

## **4.1 IP SLA (Service Level Agreements)**

Permite medir:

- Latencia
    
- Jitter
    
- Pérdida
    
- Disponibilidad
    
- MOS (calidad de voz)
    

Ejemplo ENCOR:

```
ip sla 1
 icmp-echo 8.8.8.8 source-interface Gi0/0
 frequency 10
ip sla schedule 1 life forever start-time now
```

## **4.2 NetFlow / Flexible NetFlow**

Sirve para:

- Visibilidad de flujos
    
- Detección de anomalías
    
- Capacity planning
    
- Identificación de aplicaciones
    

## **4.3 SNMP + Syslog (base histórica)**

Aunque son tradicionales, siguen siendo importantes para:

- Auditar cambios
    
- Registrar eventos
    
- Alertar fallas graves
    

---

# 5. Modelos de datos YANG

Network Assurance moderno requiere estandarización.

YANG proporciona:

- Modelos estructurados
    
- Lectura/escritura mediante NETCONF/RESTCONF
    
- Plantillas reutilizables
    
- Validación automática de cambios
    

Se usa en:

- DNA Center
    
- SD-WAN
    
- Cisco Catalyst XE
    
- Switches Nexus
    

Ejemplo RESTCONF:

```
GET /restconf/data/interfaces/interface
```

---

# 6. Intent-Based Networking (IBN)

El concepto central del capítulo:

> Network Assurance verifica que la red esté comportándose según la "intención" declarada.

Incluye:

- Validación continua
    
- Correlación de eventos
    
- Alertas basadas en impacto (no solo en métricas crudas)
    
- Recomendaciones automáticas de remediación
    

Los controladores Cisco generan:

- “Insights”
    
- “Recommendations”
    
- “Issues” correlacionados con causa raíz
    

---

# 7. User and Client Assurance (Wireless y LAN)

Cisco analiza la experiencia del cliente en varias fases:

### **7.1 Wireless Client Workflow**

1. Descubrimiento del SSID
    
2. Asociación L2
    
3. Autenticación (PSK/802.1X)
    
4. DHCP
    
5. DNS
    
6. Routing
    
7. Performance
    

Si falla, DNA Center indica _dónde_ y _por qué_.

### **7.2 LAN Assurance**

Se monitorea:

- VLAN
    
- PoE
    
- DHCP Relay
    
- Spanning Tree
    
- Routing ECMP
    
- VRF
    
- SGT propagation
    

---

# 8. Path Trace y Reachability Analysis

Herramientas avanzadas en SD-Access y DNA Center.

### **Path Trace**

Visualiza el camino real que toma un paquete dentro del fabric.

### **Reachability Analysis**

Valida:

- ACLs
    
- SGT contracts
    
- VRFs
    
- Rutas
    
- Políticas de seguridad
    

Permite saber si un flujo debería pasar o no antes de enviarlo.

---

# 9. Network Time Sync (NTP)

Fundamental para correlación de eventos:

- Logs
    
- Syslog
    
- EAP authentication
    
- Certificates
    
- Assurance analytics
    

Sin NTP, los sistemas de assurance pierden coherencia temporal.

---

# 10. ThousandEyes (Cisco)

Herramienta cloud para:

- Monitorizar Internet
    
- Ver performance entre sedes y SaaS
    
- Simular transacciones web
    
- Ver rutas BGP/AS
    
- Correlación con usuarios finales
    

Es una de las piezas modernas del ecosistema de assurance.