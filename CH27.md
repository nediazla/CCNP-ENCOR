# **Capítulo 27 – Virtualization**

La virtualización en redes empresariales consiste en **crear recursos lógicos separados sobre una misma infraestructura física**, permitiendo escalar, aislar, automatizar y optimizar el uso de hardware.

Incluye:

- Virtualización de red (VLANs, VXLAN, VRFs)
    
- Virtualización de dispositivos (hypervisores, containers, IOS-XE virtualized)
    
- Virtualización de funciones (NFV)
    
- Virtualización de políticas y servicios
    

Es la base de arquitecturas modernas como SD-Access, SD-WAN y Data Centers VXLAN/EVPN.

---

# **1. Virtualización en redes (Network Virtualization)**

Dividimos la virtualización en tres capas:

1. **Network Virtualization** – separación del tráfico
    
2. **Device Virtualization** – múltiples instancias de OS en un equipo
    
3. **Function Virtualization (NFV)** – servicios de seguridad/red virtualizados
    

---

# **2. Network Virtualization**

Aquí entran las tecnologías que separan tráfico o redes lógicas dentro de la misma infraestructura física.

## **2.1 VLANs**

La forma más básica de virtualización.  
Permiten separar dominios de broadcast en switches.

- IEEE 802.1Q (tagging)
    
- VLAN Native
    
- VLANs troncales
    
- Segmentación lógica L2
    

---

## **2.2 VRF-Lite (Virtual Routing and Forwarding)**

VRF crea **múltiples tablas de routing independientes** en un mismo router o switch L3.

- Aislamiento completo entre clientes
    
- Similar a “routers virtuales”
    
- Amplio uso en campus enterprise
    

Ejemplo:

```
ip vrf CLIENTE1
 rd 1:1
 route-target export 1:1
 route-target import 1:1
```

Asignar interfaz:

```
interface Gi0/0
 ip vrf forwarding CLIENTE1
 ip address 10.1.1.1 255.255.255.0
```

---

## **2.3 VPN L3/MPLS**

Muy usado por proveedores.  
Basado en VRFs + MPLS labels.  
Permite redes virtuales totalmente aisladas.

---

## **2.4 VXLAN (Virtual Extensible LAN)**

Protocolo de virtualización de capa 2 sobre capa 3.  
Usa **VNI de 24 bits** → 16 millones de redes virtuales.

- Reemplaza VLANs tradicionales en Data Centers
    
- Base de SD-Access y ACI
    
- Usa UDP 4789
    

---

## **2.5 Overlay Networks**

Incluye:

- GRE
    
- IPsec
    
- DMVPN
    
- VXLAN
    
- LISP
    
- SD-WAN tunnels
    

Función: **crear redes virtuales sobre cualquier underlay físico**.

---

# **3. Device Virtualization**

Virtualiza **dispositivos completos o sistemas operativos**.

## **3.1 Hypervisores**

### **Tipo 1 (bare metal)**

- ESXi
    
- Hyper-V
    
- KVM
    

### **Tipo 2 (hosted)**

- VMware Workstation
    
- VirtualBox
    

Proveen máquinas virtuales que simulan hardware completo.

---

## **3.2 Cisco virtual devices**

Cisco ofrece versiones virtuales de sus appliances:

- **CSR1000v** (router virtual IOS-XE)
    
- **vEdge Cloud** (SD-WAN)
    
- **ASAv** (Firewall ASA virtual)
    
- **vWLC** (Wireless LAN Controller virtual)
    
- **Firepower Threat Defense Virtual (FTDv)**
    
- **DNA Center Virtual** (para labs)
    

Permiten laboratorios, cloud o entornos híbridos sin hardware físico.

---

## **3.3 Container-Based Network Functions**

Cisco IOS-XE soporta contenedores **LXC/Docker** en algunas plataformas.

Beneficios:

- Acelera automatización
    
- Facilita microservicios
    
- Despliegue rápido de funciones auxiliares
    

---

## **3.4 Device Partitioning (Virtual Device Contexts – VDCs)**

En Cisco Nexus (Data Center):

- Un switch físico puede dividirse en **múltiples switches virtuales**
    
- Cada VDC tiene su propio plano de control y data-plane
    
- Ideal para multi-tenant
    

Ejemplo:

- VDC1: producción
    
- VDC2: pruebas
    
- VDC3: DMZ
    

---

# **4. Network Function Virtualization (NFV)**

NFV virtualiza **funciones de red** que antes dependían de hardware dedicado:

- Firewalls virtuales
    
- Load balancers
    
- IDS/IPS
    
- Routers virtuales
    
- VPN gateways
    
- WAN optimizers
    

Beneficios:

- Escalabilidad bajo demanda
    
- Reducción de hardware
    
- Automatización
    
- Integración con cloud
    

NFV se orquesta mediante:

- **VNFs (Virtual Network Functions)**
    
- **MANO / NFV Orchestrators**
    

Cisco emplea soluciones como:

- **vManage (SD-WAN)**
    
- **Cisco NFVIS** (host de VNFs)
    

---

# **5. Cloud Virtualization**

La virtualización es la base de la nube.

### Modelos:

- **IaaS**: infraestructura virtualizada (AWS EC2, Azure VMs)
    
- **PaaS**: servicios gestionados
    
- **SaaS**: aplicaciones completas
    

### Integraciones con redes Enterprise:

- Virtual routers (CSR1000v)
    
- SD-WAN fabric hacia cloud
    
- VRF extendidas
    
- VPN IPsec / GRE a cloud
    
- Direct Connect / ExpressRoute
    

---

# **6. Programmability + Virtualization**

Virtualización habilita:

- Infraestructura basada en APIs
    
- SDN
    
- NFV automation
    
- YANG/NETCONF/RESTCONF
    
- Telemetría en streaming
    

Virtualización y programabilidad son cimientos del networking moderno.

---

# **7. Container Networking (Concepto general)**

Usado en cloud-native:

- Docker
    
- Kubernetes
    
- Service Mesh (Istio, Envoy)
    

Características:

- Overlay virtual dentro del cluster
    
- Namespaces de red por container
    
- Políticas de acceso por pod
    
- Load balancing interno (kube-proxy / CNI plugins)
    

Cisco encaja con:

- ACI CNI integration
    
- Istio + SDN
    
- Multicloud fabrics